{"version":3,"file":"index.js","sources":["src/index.ts"],"sourcesContent":["import fs from 'fs';\nimport path from 'path';\nimport { fileURLToPath } from 'url';\n\nimport minimist from 'minimist';\nimport prompts from 'prompts';\nimport { yellow, green, cyan, blue, red } from 'kolorist';\n\nconst argv = minimist(process.argv.slice(2), { string: ['_'] });\n\nconst cwd = process.cwd();\n\nconst __dirname = path.dirname(fileURLToPath(import.meta.url));\n\n/**\n * 初始化的框架们\n */\ninterface IFrameworks {\n  name: string;\n  color: (str: string | number) => string;\n  display?: string;\n  variants?: IFrameworks[];\n}\nconst FRAMEWORKS: IFrameworks[] = [\n  {\n    name: 'vanilla',\n    color: yellow,\n    variants: [\n      {\n        name: 'vanilla',\n        display: 'JavaScript',\n        color: yellow,\n      },\n      {\n        name: 'vanilla-ts',\n        display: 'TypeScript',\n        color: blue,\n      },\n    ],\n  },\n  {\n    name: 'vue',\n    color: green,\n    variants: [\n      {\n        name: 'vue',\n        display: 'JavaScript',\n        color: yellow,\n      },\n      {\n        name: 'vue-ts',\n        display: 'TypeScript',\n        color: blue,\n      },\n    ],\n  },\n  {\n    name: 'react',\n    color: cyan,\n    variants: [\n      {\n        name: 'react',\n        display: 'JavaScript',\n        color: yellow,\n      },\n      {\n        name: 'react-ts',\n        display: 'TypeScript',\n        color: blue,\n      },\n    ],\n  },\n];\n\n/**\n * 模板名称数组\n */\nconst TEMPLATES = FRAMEWORKS.map((f) => f?.variants?.map((v) => v.name) || [f.name]).reduce((a, b) => a.concat(b), []);\n\n/**\n * 防止 .gitignore 干扰\n */\nconst renameFiles: { [id in string]: string } = {\n  _gitignore: '.gitignore',\n};\n\nasync function init() {\n  // argv._ contains all the arguments that didn't have an option associated with them.\n  // npm init app 项目名\n  // targetDir 就是上边的项目名\n  let targetDir = argv._[0];\n  // yarn create vite my-vue-app --template vue\n  let template = argv.template || argv.t;\n\n  const defaultProjectName = targetDir ?? 'initial-project';\n\n  let result: prompts.Answers<string> = {};\n\n  try {\n    result = await prompts(\n      [\n        {\n          type: targetDir ? null : 'text',\n          name: 'projectName',\n          message: '项目名:',\n          initial: defaultProjectName,\n          // eslint-disable-next-line no-return-assign\n          onState: (state) => (targetDir = state.value.trim() || defaultProjectName),\n        },\n        {\n          // type 路径不存在 或 路径存在且为空目录时 跳过进入下个选项\n          type: () => (!fs.existsSync(targetDir) || isEmpty(targetDir) ? null : 'confirm'),\n          name: 'overwrite',\n          message: () =>\n            (targetDir === '.' ? '当前目录' : `目标目录 \"${targetDir}\"`) + ` 不是空目录。移除现有文件并继续？`,\n        },\n        {\n          type: (_, { overwrite } = {} as any) => {\n            if (overwrite === false) {\n              throw new Error(red('✖') + ' 操作取消');\n            }\n            return null;\n          },\n          name: 'overwriteChecker',\n        },\n        {\n          type: () => (isValidPackageName(targetDir) ? null : 'text'),\n          name: 'packageName',\n          message: '项目包名:',\n          initial: () => toValidPackageName(targetDir),\n          validate: (dir) => isValidPackageName(dir) || '不合适的 package.json name',\n        },\n        {\n          type: template && TEMPLATES.includes(template) ? null : 'select',\n          name: 'framework',\n          message:\n            typeof template === 'string' && !TEMPLATES.includes(template)\n              ? `\"${template}\" 不包含在仓库模板中。请从下边选择一个：`\n              : '选择一个框架：',\n          initial: 0,\n          choices: FRAMEWORKS.map((framework) => {\n            const frameworkColor = framework.color;\n            return {\n              title: frameworkColor(framework.name),\n              value: framework,\n            };\n          }),\n        },\n        {\n          type: (framework) => (framework?.variants ? 'select' : null),\n          name: 'variant',\n          message: '选择一个类型：',\n          choices: (framework) =>\n            framework.variants.map((variant: IFrameworks) => {\n              const variantColor = variant.color;\n              return {\n                title: variantColor(variant.name),\n                value: variant.name,\n              };\n            }),\n        },\n      ],\n      {\n        onCancel: () => {\n          throw new Error(red('✖') + ' 操作取消');\n        },\n      },\n    );\n  } catch (cancelled: any) {\n    console.log(cancelled.message);\n    return;\n  }\n\n  // user choice associated with prompts\n  const { framework, overwrite, packageName, variant } = result;\n\n  const root = path.join(cwd, targetDir);\n\n  if (overwrite) {\n    emptyDir(root);\n  } else if (!fs.existsSync(root)) {\n    fs.mkdirSync(root);\n  }\n\n  // determine template\n  template = variant || framework || template;\n\n  console.log(`\\n正在 ${root} 创建脚手架项目中...`);\n\n  const templateDir = path.join(__dirname, `packages/template-${template}`);\n\n  const write = (file: string, content?: string) => {\n    const targetPath = renameFiles[file] ? path.join(root, renameFiles[file]) : path.join(root, file);\n    if (content) {\n      fs.writeFileSync(targetPath, content);\n    } else {\n      copy(path.join(templateDir, file), targetPath);\n    }\n  };\n\n  const files = fs.readdirSync(templateDir);\n  for (const file of files.filter((f) => !['package.json', 'node_modules'].includes(f))) {\n    write(file);\n  }\n\n  const pkg: any = import(path.join(templateDir, `package.json`));\n\n  pkg.name = packageName || targetDir;\n\n  write('package.json', JSON.stringify(pkg, null, 2));\n\n  const pkgInfo = pkgFromUserAgent(process.env.npm_config_user_agent);\n  const pkgManager = pkgInfo ? pkgInfo.name : 'npm';\n\n  console.log(`\\初始化完成！现在可以运行以下命令：\\n`);\n  if (root !== cwd) {\n    console.log(`  cd ${path.relative(cwd, root)}`);\n  }\n  switch (pkgManager) {\n    case 'yarn':\n      console.log('  yarn');\n      console.log('  yarn dev');\n      break;\n    default:\n      console.log(`  ${pkgManager} install`);\n      console.log(`  ${pkgManager} run dev`);\n      break;\n  }\n  console.log();\n}\n\nfunction isEmpty(path: fs.PathLike) {\n  return fs.readdirSync(path).length === 0;\n}\n\nfunction isValidPackageName(projectName: string) {\n  return /^(?:@[a-z0-9-*~][a-z0-9-*._~]*\\/)?[a-z0-9-~][a-z0-9-._~]*$/.test(projectName);\n}\n\nfunction toValidPackageName(projectName: string) {\n  return projectName\n    .trim()\n    .toLowerCase()\n    .replace(/\\s+/g, '-')\n    .replace(/^[._]/, '')\n    .replace(/[^a-z0-9-~]+/g, '-');\n}\n\nfunction emptyDir(dir: string) {\n  if (!fs.existsSync(dir)) {\n    return;\n  }\n  for (const file of fs.readdirSync(dir)) {\n    const abs = path.resolve(dir, file);\n    // baseline is Node 12 so can't use rmSync :(\n    if (fs.lstatSync(abs).isDirectory()) {\n      emptyDir(abs);\n      fs.rmdirSync(abs);\n    } else {\n      fs.unlinkSync(abs);\n    }\n  }\n}\n\nfunction copy(src: string, dest: string) {\n  const stat = fs.statSync(src);\n  if (stat.isDirectory()) {\n    copyDir(src, dest);\n  } else {\n    fs.copyFileSync(src, dest);\n  }\n}\n\nfunction copyDir(srcDir: string, destDir: string) {\n  fs.mkdirSync(destDir, { recursive: true });\n  for (const file of fs.readdirSync(srcDir)) {\n    const srcFile = path.resolve(srcDir, file);\n    const destFile = path.resolve(destDir, file);\n    copy(srcFile, destFile);\n  }\n}\n\nfunction pkgFromUserAgent(userAgent?: string) {\n  if (!userAgent) return undefined;\n  const pkgSpec = userAgent.split(' ')[0];\n  const pkgSpecArr = pkgSpec.split('/');\n  return {\n    name: pkgSpecArr[0],\n    version: pkgSpecArr[1],\n  };\n}\n\ninit().catch((e) => {\n  console.error(e);\n});\n"],"names":["argv","minimist","_sliceInstanceProperty","process","string","cwd","__dirname","path","dirname","fileURLToPath","import","FRAMEWORKS","name","color","yellow","variants","display","blue","green","cyan","TEMPLATES","_reduceInstanceProperty","f","v","a","b","_concatInstanceProperty","renameFiles","_gitignore","init","targetDir","_","template","t","defaultProjectName","result","prompts","type","message","initial","onState","state","_trimInstanceProperty","value","fs","existsSync","isEmpty","overwrite","Error","red","isValidPackageName","toValidPackageName","validate","dir","_includesInstanceProperty","choices","_mapInstanceProperty","framework","frameworkColor","title","variant","variantColor","onCancel","console","log","packageName","root","join","emptyDir","mkdirSync","templateDir","write","file","content","targetPath","writeFileSync","copy","files","readdirSync","_filterInstanceProperty","pkg","_JSON$stringify","pkgInfo","pkgFromUserAgent","env","npm_config_user_agent","pkgManager","relative","length","projectName","test","toLowerCase","replace","abs","resolve","lstatSync","isDirectory","rmdirSync","unlinkSync","src","dest","stat","statSync","copyDir","copyFileSync","srcDir","destDir","recursive","srcFile","destFile","userAgent","undefined","pkgSpec","split","pkgSpecArr","version","e","error"],"mappings":"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"}